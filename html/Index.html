<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Kolyan's Site</title>
</head>
<body>
    <script src="/_framework/aspnetcore-browser-refresh.js"></script>
    <h2>User form</h2>

    <form method="post" action="postuser">
        <p>
            Name: <br />
            <input name="name" />
        </p>
        <p>
            Age: <br />
            <input name="age" type="number" />
        </p>
        <p>
            Languages:<br />
            <select multiple name="languages">
                <option>C#</option>
                <option>JavaScript</option>
                <option>Kotlin</option>
                <option>Java</option>
            </select>
        </p>
        <input type="submit" value="Send" />
    </form>

    <div id="message"></div>
    <div>
        <p>
            Name: <br />
            <input name="userName" id="userName" required/>
        </p>
        <p>
            Age: <br />
            <input name="userAge" id="userAge" type="number" required/>
        </p>
        <button id="sendBtn">Send</button>
    </div>

    <script>
        document.getElementById("sendBtn").addEventListener("click", send);
        async function send()
        {
            const response = await fetch("/api",
            {
                method: "POST",
                headers: {"Accept": "application/json", "Content-Type": "application/json"},
                body: JSON.stringify({
                    name: document.getElementById("userName").value,
                    age: document.getElementById("userAge").value
                })
            });
            const message = await response.json();
            document.getElementById("message").innerText = message.text;
        }
    </script>

    <h1><a href="download">Скачать</a></h1>
</body>
</html>